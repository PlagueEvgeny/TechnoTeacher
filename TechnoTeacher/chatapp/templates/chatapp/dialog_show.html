{% extends 'chatapp/index.html' %}
{% block chat %}
<div>
    <a href="{% url 'chat:index' %}">main</a>
</div>
<h3>Диалог: {{ dialogs }}</h3>
<div class="message-create">
    <a href="{% url 'chat:dialog_message_create' sender.id %}"
       style="text-decoration: none;">
        сообщение
    </a>
</div>
<div class="dialog-messages">
    <a href="{% url 'chat:dialog_new_messages' dialogs.id %}"
       style="text-decoration: none;"
       class="dialog-update">
        обновить
    </a>
    <ul class="messages-list">
        {% for item in dialogs.get_messages_all %}
        {% if item.sender.role == '0'%}
        <p class="message-{{ item.pk }}"> {{ item.sender.member.username }}<br>
            ({{ item.created|date:"Y.m.d H:i" }}) - {{ item.text }}</p>
            {% elif item.sender.role == '1'%}
        <p class="message-{{ item.pk }}" style="float: right"> {{ item.sender.member.username }}<br>
            ({{ item.created|date:"Y.m.d H:i" }}) - {{ item.text }}</p>
            
            {% endif %}
            {% endfor %}
    </ul>
</div>

<h3>Сообщение</h3>
<form method="post">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="отправить">
</form>
{% endblock %}